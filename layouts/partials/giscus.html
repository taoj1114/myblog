{{/* Giscus comments partial
   Renders the giscus widget when the necessary params are provided in config.toml
   Expected params (in config.toml):
     [params.comments]
       provider = "giscus"
       giscus_repo = "owner/repo"
       giscus_repo_id = "REPO_ID"
       giscus_category = "Category Name"
       giscus_category_id = "CATEGORY_ID"
       giscus_mapping = "pathname"
       giscus_reactions_enabled = true
       giscus_emit_metadata = false
       giscus_input_position = "bottom"
       giscus_lang = "zh-CN"
*/}}

{{ $c := .Site.Params.comments }}
{{ if and (eq $c.provider "giscus") (ne $c.giscus_repo "") (ne $c.giscus_repo_id "") (ne $c.giscus_category "") (ne $c.giscus_category_id "") }}
<div id="giscus-container" class="mt3">
  <script src="https://giscus.app/client.js"
    data-repo="{{ $c.giscus_repo }}"
    data-repo-id="{{ $c.giscus_repo_id }}"
    data-category="{{ $c.giscus_category }}"
    data-category-id="{{ $c.giscus_category_id }}"
    data-mapping="{{ default "pathname" $c.giscus_mapping }}"
    data-reactions-enabled="{{ if $c.giscus_reactions_enabled }}1{{ else }}0{{ end }}"
    data-emit-metadata="{{ if $c.giscus_emit_metadata }}1{{ else }}0{{ end }}"
    data-input-position="{{ default "bottom" $c.giscus_input_position }}"
    data-lang="{{ default "zh-CN" $c.giscus_lang }}"
    crossorigin="anonymous"
    async>
  </script>
</div>
{{ end }}

